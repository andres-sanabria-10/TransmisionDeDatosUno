{"ast":null,"code":"var _jsxFileName = \"D:\\\\Andres Sanabria\\\\Desktop\\\\10 semestre\\\\Transmision de datos\\\\proyectoV2\\\\TransmisionDeDatos\\\\FrontEnd\\\\src\\\\components\\\\OsciloscopioPortadora.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useRef, useState } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OsciloscopioPortadora = ({\n  params\n}) => {\n  _s();\n  const containerRef = useRef(null);\n  const chartRef = useRef(null);\n  const dataSeriesRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n\n  // Primer efecto: solo establece isReady cuando el DOM y SciChart están listos\n  useEffect(() => {\n    // Verificamos si el contenedor y SciChart están disponibles\n    const checkReadiness = () => {\n      if (containerRef.current && window.SciChart) {\n        setIsReady(true);\n      } else {\n        setTimeout(checkReadiness, 100);\n      }\n    };\n    checkReadiness();\n    return () => {\n      // Limpieza al desmontar\n      if (chartRef.current) {\n        chartRef.current.delete();\n        chartRef.current = null;\n      }\n    };\n  }, []); // Solo se ejecuta una vez al montar\n\n  // Segundo efecto: inicializa SciChart una vez que todo esté listo\n  useEffect(() => {\n    if (!isReady) return;\n    let isComponentMounted = true;\n    const initSciChart = async () => {\n      try {\n        console.log(\"Iniciando SciChart con elemento:\", containerRef.current);\n\n        // Acceder a SciChart\n        const {\n          SciChartSurface,\n          NumericAxis,\n          FastLineRenderableSeries,\n          XyDataSeries,\n          NumberRange\n        } = window.SciChart;\n\n        // Inicializar SciChart con la referencia al DOM que sabemos que existe\n        const {\n          sciChartSurface,\n          wasmContext\n        } = await SciChartSurface.create(containerRef.current);\n        if (!isComponentMounted) {\n          sciChartSurface.delete();\n          return;\n        }\n        sciChartSurface.background = \"#121212\"; // Fondo oscuro\n\n        // Configurar ejes\n        const xAxis = new NumericAxis(wasmContext, {\n          axisTitle: \"Tiempo (s)\",\n          labelStyle: {\n            color: \"#e0e0e0\"\n          },\n          titleStyle: {\n            color: \"#e0e0e0\"\n          },\n          majorGridLineStyle: {\n            color: \"#333\",\n            strokeThickness: 1\n          },\n          tickLabelStyle: {\n            color: \"#e0e0e0\"\n          },\n          visibleRange: new NumberRange(0, 0.1) // Mostrar 0.1 segundos\n        });\n        const yAxis = new NumericAxis(wasmContext, {\n          axisTitle: \"Voltaje (V)\",\n          visibleRange: new NumberRange(-6, 6),\n          // Ajustado para el rango de voltaje\n          labelStyle: {\n            color: \"#e0e0e0\"\n          },\n          titleStyle: {\n            color: \"#e0e0e0\"\n          },\n          majorGridLineStyle: {\n            color: \"#333\",\n            strokeThickness: 1\n          },\n          tickLabelStyle: {\n            color: \"#e0e0e0\"\n          }\n        });\n        sciChartSurface.xAxes.add(xAxis);\n        sciChartSurface.yAxes.add(yAxis);\n\n        // Series de datos\n        const signalData = new XyDataSeries(wasmContext);\n        const lineSeries = new FastLineRenderableSeries(wasmContext, {\n          stroke: \"#FF5722\",\n          // Naranja para la portadora\n          dataSeries: signalData,\n          strokeThickness: 2.5\n        });\n        sciChartSurface.renderableSeries.add(lineSeries);\n\n        // Guardar referencias\n        chartRef.current = sciChartSurface;\n        dataSeriesRef.current = signalData;\n        console.log(\"SciChart inicializado correctamente\");\n\n        // Generar datos iniciales si los parámetros están disponibles\n        if ((params === null || params === void 0 ? void 0 : params.voltaje) !== undefined && (params === null || params === void 0 ? void 0 : params.frecuencia) !== undefined && (params === null || params === void 0 ? void 0 : params.fase) !== undefined) {\n          generateStaticData();\n        }\n      } catch (error) {\n        console.error(\"Error inicializando SciChart:\", error);\n        console.dir(error);\n      }\n    };\n    initSciChart();\n    return () => {\n      isComponentMounted = false;\n    };\n  }, [isReady]); // Se ejecuta cuando isReady cambia a true\n\n  // Tercer efecto: actualiza los datos cuando cambian los parámetros\n  useEffect(() => {\n    if (dataSeriesRef.current && (params === null || params === void 0 ? void 0 : params.voltaje) !== undefined && (params === null || params === void 0 ? void 0 : params.frecuencia) !== undefined && (params === null || params === void 0 ? void 0 : params.fase) !== undefined) {\n      generateStaticData();\n    }\n  }, [params === null || params === void 0 ? void 0 : params.voltaje, params === null || params === void 0 ? void 0 : params.frecuencia, params === null || params === void 0 ? void 0 : params.fase]);\n  const generateStaticData = () => {\n    if (!dataSeriesRef.current) return;\n    dataSeriesRef.current.clear();\n\n    // Generar datos para un ciclo completo\n    const numPoints = 1000;\n    const duration = 0.1; // 0.1 segundos\n\n    for (let i = 0; i < numPoints; i++) {\n      const time = i / numPoints * duration;\n      // Convertir frecuencia de Hz a radianes/segundo (2π * f)\n      const angularFreq = 2 * Math.PI * params.frecuencia;\n      const y = params.voltaje * Math.sin(angularFreq * time + params.fase);\n      dataSeriesRef.current.append(time, y);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: containerRef,\n    style: {\n      width: '100%',\n      height: '350px',\n      backgroundColor: '#121212'\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 146,\n    columnNumber: 5\n  }, this);\n};\n_s(OsciloscopioPortadora, \"ZVB50C/UUvb0xh7OmDQrz497SDE=\");\n_c = OsciloscopioPortadora;\nexport default OsciloscopioPortadora;\nvar _c;\n$RefreshReg$(_c, \"OsciloscopioPortadora\");","map":{"version":3,"names":["React","useEffect","useRef","useState","jsxDEV","_jsxDEV","OsciloscopioPortadora","params","_s","containerRef","chartRef","dataSeriesRef","isReady","setIsReady","checkReadiness","current","window","SciChart","setTimeout","delete","isComponentMounted","initSciChart","console","log","SciChartSurface","NumericAxis","FastLineRenderableSeries","XyDataSeries","NumberRange","sciChartSurface","wasmContext","create","background","xAxis","axisTitle","labelStyle","color","titleStyle","majorGridLineStyle","strokeThickness","tickLabelStyle","visibleRange","yAxis","xAxes","add","yAxes","signalData","lineSeries","stroke","dataSeries","renderableSeries","voltaje","undefined","frecuencia","fase","generateStaticData","error","dir","clear","numPoints","duration","i","time","angularFreq","Math","PI","y","sin","append","ref","style","width","height","backgroundColor","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/Andres Sanabria/Desktop/10 semestre/Transmision de datos/proyectoV2/TransmisionDeDatos/FrontEnd/src/components/OsciloscopioPortadora.js"],"sourcesContent":["import React, { useEffect, useRef, useState } from 'react';\n\nconst OsciloscopioPortadora = ({ params }) => {\n  const containerRef = useRef(null);\n  const chartRef = useRef(null);\n  const dataSeriesRef = useRef(null);\n  const [isReady, setIsReady] = useState(false);\n\n  // Primer efecto: solo establece isReady cuando el DOM y SciChart están listos\n  useEffect(() => {\n    // Verificamos si el contenedor y SciChart están disponibles\n    const checkReadiness = () => {\n      if (containerRef.current && window.SciChart) {\n        setIsReady(true);\n      } else {\n        setTimeout(checkReadiness, 100);\n      }\n    };\n    \n    checkReadiness();\n    \n    return () => {\n      // Limpieza al desmontar\n      if (chartRef.current) {\n        chartRef.current.delete();\n        chartRef.current = null;\n      }\n    };\n  }, []); // Solo se ejecuta una vez al montar\n\n  // Segundo efecto: inicializa SciChart una vez que todo esté listo\n  useEffect(() => {\n    if (!isReady) return;\n    \n    let isComponentMounted = true;\n    \n    const initSciChart = async () => {\n      try {\n        console.log(\"Iniciando SciChart con elemento:\", containerRef.current);\n        \n        // Acceder a SciChart\n        const {\n          SciChartSurface,\n          NumericAxis,\n          FastLineRenderableSeries,\n          XyDataSeries,\n          NumberRange\n        } = window.SciChart;\n        \n        // Inicializar SciChart con la referencia al DOM que sabemos que existe\n        const { sciChartSurface, wasmContext } = await SciChartSurface.create(containerRef.current);\n        \n        if (!isComponentMounted) {\n          sciChartSurface.delete();\n          return;\n        }\n        \n        sciChartSurface.background = \"#121212\"; // Fondo oscuro\n        \n        // Configurar ejes\n        const xAxis = new NumericAxis(wasmContext, { \n          axisTitle: \"Tiempo (s)\",\n          labelStyle: { color: \"#e0e0e0\" },\n          titleStyle: { color: \"#e0e0e0\" },\n          majorGridLineStyle: { color: \"#333\", strokeThickness: 1 },\n          tickLabelStyle: { color: \"#e0e0e0\" },\n          visibleRange: new NumberRange(0, 0.1) // Mostrar 0.1 segundos\n        });\n        \n        const yAxis = new NumericAxis(wasmContext, { \n          axisTitle: \"Voltaje (V)\", \n          visibleRange: new NumberRange(-6, 6), // Ajustado para el rango de voltaje\n          labelStyle: { color: \"#e0e0e0\" },\n          titleStyle: { color: \"#e0e0e0\" },\n          majorGridLineStyle: { color: \"#333\", strokeThickness: 1 },\n          tickLabelStyle: { color: \"#e0e0e0\" }\n        });\n        \n        sciChartSurface.xAxes.add(xAxis);\n        sciChartSurface.yAxes.add(yAxis);\n        \n        // Series de datos\n        const signalData = new XyDataSeries(wasmContext);\n        \n        const lineSeries = new FastLineRenderableSeries(wasmContext, { \n          stroke: \"#FF5722\", // Naranja para la portadora\n          dataSeries: signalData,\n          strokeThickness: 2.5\n        });\n        \n        sciChartSurface.renderableSeries.add(lineSeries);\n        \n        // Guardar referencias\n        chartRef.current = sciChartSurface;\n        dataSeriesRef.current = signalData;\n        \n        console.log(\"SciChart inicializado correctamente\");\n        \n        // Generar datos iniciales si los parámetros están disponibles\n        if (params?.voltaje !== undefined && \n            params?.frecuencia !== undefined && \n            params?.fase !== undefined) {\n          generateStaticData();\n        }\n      } catch (error) {\n        console.error(\"Error inicializando SciChart:\", error);\n        console.dir(error);\n      }\n    };\n    \n    initSciChart();\n    \n    return () => {\n      isComponentMounted = false;\n    };\n  }, [isReady]); // Se ejecuta cuando isReady cambia a true\n  \n  // Tercer efecto: actualiza los datos cuando cambian los parámetros\n  useEffect(() => {\n    if (dataSeriesRef.current && params?.voltaje !== undefined && \n        params?.frecuencia !== undefined && params?.fase !== undefined) {\n      generateStaticData();\n    }\n  }, [params?.voltaje, params?.frecuencia, params?.fase]);\n  \n  const generateStaticData = () => {\n    if (!dataSeriesRef.current) return;\n    \n    dataSeriesRef.current.clear();\n    \n    // Generar datos para un ciclo completo\n    const numPoints = 1000;\n    const duration = 0.1; // 0.1 segundos\n    \n    for (let i = 0; i < numPoints; i++) {\n      const time = (i / numPoints) * duration;\n      // Convertir frecuencia de Hz a radianes/segundo (2π * f)\n      const angularFreq = 2 * Math.PI * params.frecuencia;\n      const y = params.voltaje * Math.sin(angularFreq * time + params.fase);\n      \n      dataSeriesRef.current.append(time, y);\n    }\n  };\n  \n  return (\n    <div ref={containerRef} style={{ width: '100%', height: '350px', backgroundColor: '#121212' }}></div>\n  );\n};\n\nexport default OsciloscopioPortadora;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}